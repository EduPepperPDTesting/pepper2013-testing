<%! from django.utils.translation import ugettext as _ %>
<%!
    from django.core.urlresolvers import reverse
    from courseware.courses import course_image_url, get_course_about_section
    from courseware.access import has_access
    from certificates.models import CertificateStatuses
    from xmodule.modulestore import MONGO_MODULESTORE_TYPE
    from xmodule.modulestore.django import modulestore
    from student.models import State,District,Transaction,Cohort,School,SubjectArea,GradeLevel,YearsInEducation
    from baseinfo.models import Enum
%>
<%! navbar_show_extended=False %>
<%inherit file="../main.html" />
<%namespace name='static' file='../static_content.html'/>
<%block name="title"><title>Communities</title></%block>
<link rel="stylesheet" type="text/css"  href="/static/css/communities.css"/>

<style type="text/css" media="screen">
    #page-nav,#page-footer{width:1180px;}
    #btn-logged-user{display:none;}
    .form-select{font-size:14px !important;width:180px;}
    .image-link-style{
        border-radius: 6px;
        -moz-border-radius: 6px;
        -webkit-border-radius: 6px;
        display: block;
        float: left;
        margin: 30px;
    }
    .image-bottom-style{
        border-radius: 0 0 6px 6px;
        -moz-border-radius: 0 0 6px 6px;
        -webkit-border-radius: 0 0 6px 6px;
        display: block;
    }
    .card-link{
        display: table-cell;
        width: 240px;
        height: 60px;
        vertical-align: middle;
        padding: 0 17px;
        font-size: 22px;
        background: rgba(18,111,154,0.95);
        text-decoration: none!important;
    }
    .card-link span{
        color: #FFFFFF;
    }
    .community-form {
        margin: 0 auto;
        width: 900px;
        padding: 20px;
    }
    #community, #community-logo, #community-facilitator {
        display: block;
        float: left;
        margin: 0 40px 20px 0;
        text-align: left;
    }
    #community input, #community-facilitator input {
        display: block;
        width: 500px;
    }
    #community-logo input {
        display: block;
    }
    #community-name, #community-motto, #community-courses, #community-resources {
        clear: both;
        display: block;
        text-align: left;
        margin-bottom: 20px;
    }
    #community-name input, #community-motto input {
        display: block;
        width: 860px;
    }
    #community-private {
        display: block;
        float: left;
        text-align: left;
        padding-top: 1.75em;
    }
    #community-private input {
        margin-left: 10px;
    }
    #community-courses span, #community-resources span {
        display: block;
    }
    #community-courses input, #community-courses select, #community-resources input {
        display: block;
        float: left;
        margin: 0 20px 20px 0;
    }
    .resource-link, .resource-name {
        width: 240px;
    }
    #community-submit {
        display: block;
        clear: both;
        margin: 0 auto;
    }
    #community-resources .add, #community-courses .add {
        padding: 0 6px;
    }
</style>
<script type="text/javascript">

</script>
<section class="community-form" style="text-align:center;background:#F5F5F5;">
    <form action="${reverse('community_edit_process')}" method="post">
        %if user_type == 'super':
            <label id="community"><span>Community ID:</span><input type="text" name="community" value="${community}"></label>
        %elif user_type == 'facilitator':
            <label id="community"><span>Community ID:</span><input type="text" name="community" value="${community}" disabled="disabled"></label>
        %endif
        %if logo != '':
            <label id="community-logo"><span>Logo:</span><img class="community-logo-thumb" src="${logo}"><input type="hidden" name="logo" value="${logo}"></label>
        %else:
            <label id="community-logo"><span>Logo:</span><input type="file" name="logo"></label>
        %endif
        <label id="community-name"><span>Community Name:</span><input type="text" name="name" value="${name}"></label>
        <label id="community-motto"><span>Description (Motto):</span><input type="text" name="motto" value="${motto}"></label>
        <label id="community-facilitator"><span>Facilitator:</span><input type="text" name="facilitator" value="${facilitator}"></label>
        %if private:
            <label id="community-private"><span>Private Group:</span><input type="checkbox" name="private" checked="checked"></label>
        %else:
            <label id="community-private"><span>Private Group:</span><input type="checkbox" name="private"></label>
        %endif
        <label id="community-courses"><span>Courses:</span>
        %for idx, course in enumerate(courses):
            <select name="course[${idx}]">
                <option value="">Select a Course</option>
                %for course_option in courses_drop:
                    %if course == course_option['id']:
                        <option value="${course_option['id']}" selected="selected">${course_option['number']} | ${course_option['name']}</option>
                    %else:
                        <option value="${course_option['id']}">${course_option['number']} | ${course_option['name']}</option>
                    %endif
                %endfor
            </select>
            <input type="button" class="add" value="+">
        %endfor
        </label>
        <label id="community-resources"><span>Resources:</span>
        %for idx, resource in enumerate(resources):
            <input class="resource-name" type="text" name="resource_name[${idx}]" value="${resource['name']}">
            <input class="resource-link" type="text" name="resource_link[${idx}]" value="${resource['link']}">
            %if resource['logo'] == '':
                <input type="file" name="resource_logo[${idx}]">
            %else:
                <img src="${resource['logo']}" class="community-logo-thumb"><input type="hidden" name="resource_logo[${idx}]", value="${resource['logo']}">
            %endif
            <input type="button" class="add" value="+">
        %endfor
        </label>
        <input type="hidden" value="${community_id}" name="community_id">
        <input type="hidden" name="csrfmiddlewaretoken" value="${csrf_token}"/>
        <input id="community-submit" type="submit" value="Submit" name="submit">
    </form>
</section>
